<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Circalify 2.0 - Flexible Ring System Demo</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family:
          -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          "Helvetica Neue", Arial, sans-serif;
        background: #f5f7fa;
        overflow: hidden;
      }

      #container {
        width: 100vw;
        height: 100vh;
      }
    </style>
  </head>
  <body>
    <div id="container"></div>

    <!-- Load modules in correct order -->
    <script src="layout-calculator.js"></script>
    <script src="config-parser.js"></script>
    <script src="base-ring.js"></script>
    <script src="calendar-ring.js"></script>
    <script src="header-ring.js"></script>
    <script src="data-ring.js"></script>
    <script src="ring-factory.js"></script>
    <script src="circalify-core.js"></script>
    <script src="circalify.js"></script>

    <script>
      // Sample event data (matches old format)
      const sampleEvents = [
        // Events for the data ring
        {
          label: "Q1 Planning",
          startDate: "2025-01-06",
          endDate: "2025-01-12",
          color: "#5090d3",
          description: "First quarter planning session"
        },
        {
          label: "Board Meeting",
          startDate: "2025-02-10",
          endDate: "2025-02-15",
          color: "#5090d3",
          description: "Monthly board meeting"
        },
        {
          label: "Team Workshop",
          startDate: "2025-03-12",
          endDate: "2025-03-18",
          color: "#d89b7d",
          description: "Team building workshop"
        },
        {
          label: "Q2 Review",
          startDate: "2025-04-20",
          endDate: "2025-04-25",
          color: "#5090d3",
          description: "Second quarter review"
        },
        {
          label: "Annual Conference",
          startDate: "2025-05-20",
          endDate: "2025-06-05",
          color: "#d89b7d",
          description: "Annual company conference"
        },
        {
          label: "Summer Campaign",
          startDate: "2025-06-15",
          endDate: "2025-07-15",
          color: "#88c7d0",
          description: "Summer marketing campaign"
        },
        {
          label: "Product Launch",
          startDate: "2025-08-01",
          endDate: "2025-08-10",
          color: "#88c7d0",
          description: "New product launch"
        },
        {
          label: "Q3 Board Meeting",
          startDate: "2025-08-25",
          endDate: "2025-09-05",
          color: "#c79c9c",
          description: "Third quarter board meeting"
        },
        {
          label: "Team Offsite",
          startDate: "2025-09-10",
          endDate: "2025-09-18",
          color: "#2d6a5c",
          description: "Team offsite event"
        },
        {
          label: "Month Review",
          startDate: "2025-10-10",
          endDate: "2025-10-20",
          color: "#7a6f9e",
          description: "Monthly performance review"
        },
        {
          label: "Strategy Session",
          startDate: "2025-11-05",
          endDate: "2025-11-12",
          color: "#2d6a5c",
          description: "Strategic planning session"
        },
        {
          label: "Year-End Celebration",
          startDate: "2025-12-15",
          endDate: "2025-12-31",
          color: "#8b5a7d",
          description: "Year-end activities"
        }
      ];

      // NEW API Configuration
      const config = {
        // General settings
        title: "Board Management Annual Wheel 2025",
        calendarSettings: "static",
        discRetention: "with-year",
        startYear: 2025,
        startMonth: 0, // January
        numberOfMonths: 12,
        colorPalette: ["#FF6B6B", "#4ECDC4", "#45B7D1", "#FFA07A", "#98D8C8"],
        sameRingHeight: false,

        // Dimensions
        innerRadius: 50,
        outerRadius: 220,
        viewBoxPadding: 40,

        // Visual settings
        backgroundColor: "#f5f7fa",
        showTimeline: true,
        enableZoom: true,
        enableDetailPanel: true,
        interactive: true,

        // Rings configuration (inside to outside order)
        rings: [
          // Ring 0 - INNERMOST: Data Ring for events
          {
            type: "data",
            active: true,
            name: "Meeting Events",
            color: "#b8e6e6",
            unit: "day",
            height: 25, // Proportional height
            fontSize: 10,
            fontColor: "#333333",
            showLabels: true,
            interactive: true
          },

          // Ring 1 - MIDDLE: Calendar Ring with month names
          {
            type: "calendar",
            active: true,
            calendarType: "Month Names", // Can be: "Month Names", "Week Numbers", "Day Numbers", "Quarters"
            showYear: true,
            color: "#ffd4d4",
            height: 15,
            separator: true,
            fontSize: 11,
            fontColor: "#333333",
            fontWeight: "600"
          },

          // Ring 2 - OUTERMOST: Header Ring
          {
            type: "header",
            active: true,
            headerText: "Board Meetings - 2025",
            separator: false,
            cells: 12, // Divide ring into 12 cells
            color: "#d4f4f4",
            height: 10,
            fontSize: 10,
            fontColor: "#5090d3",
            fontWeight: "700"
          }
        ]
      };

      // Initialize the Annual Wheel
      const container = document.getElementById("container");
      const wheel = new AnnualWheel(container, config);

      // Load data into the DataRing
      wheel.setData(sampleEvents);

      console.log("Circalify 2.0 initialized!");
      console.log("Version:", AnnualWheel.version);
      console.log("Available Ring Types:", AnnualWheel.getAvailableRingTypes());
      console.log("Available Calendar Types:", AnnualWheel.getAvailableCalendarTypes());
      console.log("Rings:", wheel.getRings());

      // Example: Access specific rings
      const dataRing = wheel.getDataRings()[0];
      console.log("Data Ring:", dataRing);

      // Example: Update data programmatically
      setTimeout(() => {
        console.log("Adding new event...");
        const newEvents = [
          ...sampleEvents,
          {
            label: "New Year Planning",
            startDate: "2025-12-28",
            endDate: "2025-12-31",
            color: "#ff6b6b",
            description: "End of year planning"
          }
        ];
        wheel.setData(newEvents);
      }, 3000);
    </script>
  </body>
</html>
